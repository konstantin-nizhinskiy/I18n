/*
name: nks-i18n
version: 1.2.0
author: Konstantin Nizhinskiy
date: 2017-01-24 22:01:26 

*/
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.i18n=b()}):"object"==typeof module&&module.exports?module.exports=a.i18n=b():a.i18n=b()}(this,function(){var a=function(){this.setProperty({locale:"UA",localeDefault:"UA",versionJson:+new Date})},b="UA",c="UA",d="",e={},f={};a.prototype.changeLocale=function(a){var b=[],c=this;for(var d in f)f[d][a]!==!0&&b.push(d);if(b.length>0){var e=b.length,g=function(){e--,0===e&&c.trigger("changeLocale",a)};h(a),b.forEach(function(a){c.load(a,g)})}else h(a),this.trigger("changeLocale",a)};var g={};a.prototype.on=function(a,b){"undefined"==typeof g[a]&&(g[a]={callback:[],callbackOnce:[]}),g[a].callback.push(b)},a.prototype.once=function(a,b){"undefined"==typeof g[a]&&(g[a]={callback:[],callbackOnce:[]}),g[a].callbackOnce.push(b)},a.prototype.off=function(a,b){var c;if("function"==typeof b){if(g[a].callback&&g[a].callback.length>0){c=[];for(var d=0;d<g[a].callback.length;d++)"function"==typeof g[a].callback[d]&&g[a].callback[d]!==b&&c.push(g[a].callback[d]);g[a].callback=c}if(g[a].callbackOnce&&g[a].callbackOnce.length>0){c=[];for(var d=0;d<g[a].callbackOnce.length;d++)"function"==typeof g[a].callbackOnce[d]&&g[a].callbackOnce[d]!==b&&c.push(g[a].callbackOnce[d]);g[a].callbackOnce=c}}else delete g[a]},a.prototype.trigger=function(a){if(g[a]){var b=[];for(var c in arguments)0!=c&&b.push(arguments[c]);if(g[a].callback&&g[a].callback.length>0)for(var d=0;d<g[a].callback.length;d++)"function"==typeof g[a].callback[d]&&g[a].callback[d].apply(this,b);if(g[a].callbackOnce&&g[a].callbackOnce.length>0){for(var d=0;d<g[a].callbackOnce.length;d++)"function"==typeof g[a].callbackOnce[d]&&g[a].callbackOnce[d].apply(this,b);g[a].callbackOnce=[]}}},a.prototype.get=function(a,b,f){var g;if(e[this.getLocale()]&&e[this.getLocale()][a]){if(g=e[this.getLocale()][a],"object"==typeof b)for(var h in b)g=g.replace(new RegExp("{{[ ]{0,}"+h+"[ ]{0,}}}","g"),b[h]);return g}if(this.trigger("error","error:translation:key",a,this.getLocale()),this.trigger("error:translation:key",a,this.getLocale()),c&&e[c]&&e[c][a]){if(g=e[c][a],"object"==typeof b)for(var h in b)g=g.replace(new RegExp("{{[ ]{0,}"+h+"[ ]{0,}}}","g"),b[h]);return g}return f&&f.defaultValue?f.defaultValue:d?d:a},a.prototype.getLocale=function(){return b},a.prototype.load=function(a,b){if("undefined"==typeof f[a]&&(f[a]={}),"undefined"==typeof f[a][c]&&this.getLocale()!==c){var d=new XMLHttpRequest,g=this;d.open("GET",a+"."+c.toLowerCase()+".json?"+this._versionJson,!0),d.send(),d.onreadystatechange=function(){if(4==d.readyState)if(200!=d.status)g.trigger("error","error:load",d.statusText,d.status,d),g.trigger("error:load",d.statusText,d.status,d);else{var b=JSON.parse(d.responseText);if(f[a][c]=!0,"undefined"==typeof e[c])e[c]=b;else for(var h in b)e[c][h]||(e[c][h]=b[h])}}}if("undefined"==typeof f[a][this.getLocale()]){var h=new XMLHttpRequest,g=this;h.open("GET",a+"."+this.getLocale().toLowerCase()+".json?"+this._versionJson,!0),h.send(),h.onreadystatechange=function(){if(4==h.readyState)if(200!=h.status)g.trigger("error","error:load",h.statusText,h.status,h),g.trigger("error:load",h.statusText,h.status,h),"function"==typeof b&&b();else{var c=JSON.parse(h.responseText);if(f[a][g.getLocale()]=!0,"undefined"==typeof e[g.getLocale()])e[g.getLocale()]=c;else for(var d in c)e[g.getLocale()][d]||(e[g.getLocale()][d]=c[d]);g.trigger("load",a,f[a][g.getLocale()]),"function"==typeof b&&b()}}}else"function"==typeof b&&b()};var h=function(a){b=a};return a.prototype.setProperty=function(a){a.locale&&(b=a.locale),a.localeDefault&&(c=a.localeDefault),a.versionJson&&(this._versionJson=a.versionJson),a.defaultValue&&(d=a.defaultValue)},new a});